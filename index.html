<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mann Documents</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Abril+Fatface&family=Alegreya&family=Alegreya+Sans&family=Alegreya+SC&family=Alfa+Slab+One&family=Alice&family=Alike&family=Alike+Angular&family=Allan&family=Allerta&family=Allerta+Stencil&family=Allura&family=Almendra&family=Almendra+Display&family=Almendra+SC&family=Amarante&family=Amaranth&family=Amatic+SC&family=Amethysta&family=Amiri&family=Amita&family=Anaheim&family=Andada&family=Andika&family=Angkor&family=Annie+Use+Your+Telescope&family=Anonymous+Pro&family=Antic&family=Antic+Didone&family=Antic+Slab&family=Anton&family=Arapey&family=Arbutus&family=Arbutus+Slab&family=Architects+Daughter&family=Archivo+Black&family=Archivo+Narrow&family=Aref+Ruqaa&family=Arima+Madurai&family=Arimo&family=Arizonia&family=Armata&family=Arsenal&family=Artifika&family=Arvo&family=Arya&family=Asap&family=Asar&family=Asset&family=Astloch&family=Asul&family=Athiti&family=Atma&family=Atomic+Age&family=Aubrey&family=Audiowide&family=Autour+One&family=Average&family=Average+Sans&family=Averia+Gruesa+Libre&family=Averia+Libre&family=Averia+Sans+Libre&family=Averia+Serif+Libre&family=Bad+Script&family=Balthazar&family=Bangers&family=Basic&family=Battambang&family=Baumans&family=Bayon&family=Belgrano&family=Belleza&family=BenchNine&family=Bentham&family=Berkshire+Swash&family=Bevan&family=Bigelow+Rules&family=Bigshot+One&family=Bilbo&family=Bilbo+Swash+Caps&family=Biryani&family=Bitter&family=Black+Ops+One&family=Bokor&family=Bonbon&family=Boogaloo&family=Bowlby+One&family=Bowlby+One+SC&family=Brawler&family=Bree+Serif&family=Bubblegum+Sans&family=Bubbler+One&family=Buda&family=Buenard&family=Butcherman&family=Butterfly+Kids&family=Cabin&family=Cabin+Condensed&family=Cabin+Sketch&family=Caesar+Dressing&family=Cagliostro&family=Calligraffitti&family=Cambay&family=Cambo&family=Candal&family=Cantarell&family=Cantata+One&family=Cantora+One&family=Capriola&family=Cardo&family=Carme&family=Carrois+Gothic&family=Carrois+Gothic+SC&family=Carter+One&family=Caudex&family=Cedarville+Cursive&family=Ceviche+One&family=Changa+One&family=Chango&family=Chau+Philomene+One&family=Chela+One&family=Chelsea+Market&family=Chenla&family=Cherry+Cream+Soda&family=Cherry+Swash&family=Chewy&family=Chicle&family=Chivo&family=Cinzel&family=Cinzel+Decorative&family=Clicker+Script&family=Coda&family=Coda+Caption&family=Codystar&family=Combo&family=Comfortaa&family=Comic+Neue&family=Concert+One&family=Condiment&family=Content&family=Contrail+One&family=Convergence&family=Cookie&family=Copse&family=Corben&family=Cormorant&family=Cormorant+Garamond&family=Cormorant+Infant&family=Cormorant+SC&family=Cormorant+Unicase&family=Cormorant+Upright&family=Courgette&family=Cousine&family=Coustard&family=Covered+By+Your+Grace&family=Crafty+Girls&family=Creepster&family=Crete+Round&family=Crimson+Text&family=Croissant+One&family=Crushed&family=Cuprum&family=Cutive&family=Cutive+Mono&family=Damion&family=Dancing+Script&family=Dangrek&family=Dawning+of+a+New+Day&family=Days+One&family=Dekko&family=Delius&family=Delius+Swash+Caps&family=Delius+Unicase&family=Della+Respira&family=Denk+One&family=Devonshire&family=Dhurjati&family=Didact+Gothic&family=Diplomata&family=Diplomata+SC&family=Domine&family=Donegal+One&family=Doppio+One&family=Dorsa&family=Dosis&family=Dr+Sugiyama&family=Droid+Sans&family=Droid+Sans+Mono&family=Droid+Serif&family=Duru+Sans&family=Dynalight&family=EB+Garamond&family=Eagle+Lake&family=Eater&family=Economica&family=Eczar&family=Ek+Mukta&family=Electrolize&family=Elsie&family=Elsie+Swash+Caps&family=Emblema+One&family=Emilys+Candy&family=Engagement&family=Englebert&family=Enriqueta&family=Erica+One&family=Esteban&family=Euphoria+Script&family=Ewert&family=Exo&family=Exo+2&family=Expletus+Sans&family=Fanwood+Text&family=Farsan&family=Fascinate&family=Fascinate+Inline&family=Faster+One&family=Fasthand&family=Fauna+One&family=Federant&family=Federo&family=Felipa&family=Fenix&family=Finger+Paint&family=Fira+Mono&family=Fira+Sans&family=Fjalla+One&family=Fjord+One&family=Flamenco&family=Flavors&family=Fondamento&family=Fontdiner+Swanky&family=Forum&family=Francois+One&family=Freckle+Face&family=Fredericka+the+Great&family=Fredoka+One&family=Freehand&family=Fresca&family=Frijole&family=Fruktur&family=Fugaz+One&family=GFS+Didot&family=GFS+Neohellenic&family=Gabriela&family=Gafata&family=Galdeano&family=Galindo&family=Gentium+Basic&family=Gentium+Book+Basic&family=Geo&family=Geostar&family=Geostar+Fill&family=Germania+One&family=Gidugu&family=Gilda+Display&family=Give+You+Glory&family=Glass+Antiqua&family=Glegoo&family=Gloria+Hallelujah&family=Goblin+One&family=Gochi+Hand&family=Gorditas&family=Goudy+Bookletter+1911&family=Graduate&family=Grand+Hotel&family=Gravitas+One&family=Great+Vibes&family=Griffy&family=Gruppo&family=Gudea&family=Gurajada&family=Habibi&family=Halant&family=Hammersmith+One&family=Hanalei&family=Hanalei+Fill&family=Handlee&family=Hanuman&family=Happy+Monkey&family=Harmattan&family=Headland+One&family=Henny+Penny&family=Herr+Von+Muellerhoff&family=Hind&family=Hind+Siliguri&family=Hind+Vadodara&family=Holtwood+One+SC&family=Homemade+Apple&family=Homenaje&family=IM+Fell+DW+Pica&family=IM+Fell+DW+Pica+SC&family=IM+Fell+Double+Pica&family=IM+Fell+Double+Pica+SC&family=IM+Fell+English&family=IM+Fell+English+SC&family=IM+Fell+French+Canon&family=IM+Fell+French+Canon+SC&family=IM+Fell+Great+Primer&family=IM+Fell+Great+Primer+SC&family=Iceland&family=Iceberg&family=Idealist+Sans&family=IM+Fell+Great+Primer&family=Imprima&family=Inconsolata&family=Inder&family=Indie+Flower&family=Inika&family=Irish+Grover&family=Istok+Web&family=Italiana&family=Italianno&family=Jacques+Francois&family=Jacques+Francois+Shadow&family=Jaldi&family=Jim+Nightshade&family=Jockey+One&family=Jolly+Lodger&family=Josefin+Sans&family=Josefin+Slab&family=Joti+One&family=Judson&family=Julee&family=Julius+Sans+One&family=Junge&family=Jura&family=Just+Another+Hand&family=Just+Me+Again+Down+Here&family=Kadwa&family=Kalam&family=Kameron&family=Kanit&family=Kantumruy&family=Karla&family=Karma&family=Kaushan+Script&family=Kavoon&family=Kdam+Thmor&family=Keania+One&family=Kelly+Slab&family=Kenia&family=Khand&family=Khmer&family=Khula&family=Kite+One&family=Knewave&family=Kotta+One&family=Koulen&family=Kranky&family=Kreon&family=Kristi&family=Krona+One&family=Kurale&family=La+Belle+Aurore&family=Laila&family=Lakki+Reddy&family=Lalezar&family=Lancelot&family=Lateef&family=Lato&family=League+Script&family=Leckerli+One&family=Ledger&family=Lekton&family=Lemon&family=Libre+Baskerville&family=Life+Savers&family=Lilita+One&family=Lily+Script+One&family=Limelight&family=Linden+Hill&family=Lobster&family=Lobster+Two&family=Londrina+Outline&family=Londrina+Shadow&family=Londrina+Sketch&family=Londrina+Solid&family=Lora&family=Love+Ya+Like+A+Sister&family=Loved+by+the+King&family=Lovers+Quarrel&family=Luckiest+Guy&family=Lusitana&family=Lustria&family=Macondo&family=Macondo+Swash+Caps&family=Mada&family=Magra&family=Maiden+Orange&family=Maitree&family=Mallanna&family=Mandali&family=Marcellus&family=Marcellus+SC&family=Marck+Script&family=Margarine&family=Marko+One&family=Marmelad&family=Martel&family=Martel+Sans&family=Marvel&family=Mate&family=Mate+SC&family=Maven+Pro&family=McLaren&family=Meddon&family=MedievalSharp&family=Medula+One&family=Meera+Inimai&family=Megrim&family=Meie+Script&family=Merienda&family=Merienda+One&family=Merriweather&family=Merriweather+Sans&family=Metal&family=Metal+Mania&family=Metamorphous&family=Metrophobic&family=Michroma&family=Milonga&family=Miltonian&family=Miltonian+Tattoo&family=Miniver&family=Miriam+Libre&family=Mirza&family=Miss+Fajardose&family=Modak&family=Modern+Antiqua&family=Molengo&family=Molle&family=Monda&family=Monofett&family=Monoton&family=Monsieur+La+Doulaise&family=Montaga&family=Montez&family=Montserrat&family=Montserrat+Alternates&family=Montserrat+Subrayada&family=Moul&family=Moulpali&family=Mountains+of+Christmas&family=Mouse+Memoirs&family=Mr+Bedfort&family=Mr+Dafoe&family=Mr+De+Haviland&family=Mrs+Saint+Delafield&family=Mrs+Sheppards&family=Mukta+Vaani&family=Muli&family=Mystery+Quest&family=NTR&family=Neucha&family=Neuton&family=New+Rocker&family=News+Cycle&family=Niconne&family=Nixie+One&family=Nobile&family=Nokora&family=Norican&family=Nosifer&family=Nothing+You+Could+Do&family=Noticia+Text&family=Noto+Sans&family=Noto+Serif&family=Nova+Cut&family=Nova+Flat&family=Nova+Mono&family=Nova+Oval&family=Nova+Round&family=Nova+Script&family=Nova+Slim&family=Nova+Square&family=Numans&family=Nunito&family=Odor+Mean+Chey&family=Offside&family=Old+Standard+TT&family=Oldenburg&family=Oleo+Script&family=Oleo+Script+Swash+Caps&family=Open+Sans&family=Open+Sans+Condensed&family=Oranienbaum&family=Orbitron&family=Oregano&family=Orienta&family=Original+Surfer&family=Oswald&family=Over+the+Rainbow&family=Overlock&family=Overlock+SC&family=Overpass&family=Overpass+Mono&family=Ovo&family=Oxygen&family=Oxygen+Mono&family=PT+Mono&family=PT+Sans&family=PT+Sans+Caption&family=PT+Sans+Narrow&family=PT+Serif&family=PT+Serif+Caption&family=Pacifico&family=Palanquin&family=Palanquin+Dark&family=Paprika&family=Parisienne&family=Passero+One&family=Passion+One&family=Pathway+Gothic+One&family=Patrick+Hand&family=Patrick+Hand+SC&family=Pattaya&family=Patua+One&family=Pavanam&family=Paytone+One&family=Peddana&family=Peralta&family=Permanent+Marker&family=Petit+Formal+Script&family=Petrona&family=Philosopher&family=Piedra&family=Pinyon+Script&family=Pirata+One&family=Plaster&family=Play&family=Playball&family=Playfair+Display&family=Playfair+Display+SC&family=Podkova&family=Poiret+One&family=Poller+One&family=Poly&family=Pompiere&family=Pontano+Sans&family=Poppins&family=Port+Lligat+Sans&family=Port+Lligat+Slab&family=Pragati+Narrow&family=Prata&family=Preahvihear&family=Press+Start+2P&family=Princess+Sofia&family=Prociono&family=Prompt&family=Prosto+One&family=Proza+Libre&family=Puritan&family=Purple+Purse&family=Quando&family=Quantico&family=Quattrocento&family=Quattrocento+Sans&family=Questrial&family=Quicksand&family=Quintessential&family=Qwigley&family=Racing+Sans+One&family=Radley&family=Rajdhani&family=Raleway&family=Raleway+Dots&family=Ramabhadra&family=Ramaraja&family=Rambla&family=Rammetto+One&family=Ranchers&family=Rancho&family=Ranga&family=Rasa&family=Rationale&family=Ravi+Prakash&family=Redressed&family=Reem+Kufi&family=Reenie+Beanie&family=Revalia&family=Ribeye&family=Ribeye+Marrow&family=Righteous&family=Risque&family=Roboto&family=Roboto+Condensed&family=Roboto+Mono&family=Roboto+Slab&family=Rochester&family=Rock+Salt&family=Rokkitt&family=Romanesco&family=Ropa+Sans&family=Rosario&family=Rosarivo&family=Rouge+Script&family=Rozha+One&family=Rubik&family=Rubik+Mono+One&family=Ruda&family=Rufina&family=Ruge+Boogie&family=Ruluko&family=Rum+Raisin&family=Ruslan+Display&family=Russo+One&family=Ruthie&family=Rye&family=Sacramento&family=Sahitya&family=Sail&family=Salsa&family=Sanchez&family=Sancreek&family=Sansita+One&family=Sarabun&family=Sarala&family=Sarina&family=Sarpanch&family=Satisfy&family=Scada&family=Scheherazade&family=Schoolbell&family=Seaweed+Script&family=Sevillana&family=Seymour+One&family=Shadows+Into+Light&family=Shadows+Into+Light+Two&family=Shanti&family=Share&family=Share+Tech&family=Share+Tech+Mono&family=Shojumaru&family=Short+Stack&family=Siemreap&family=Sigmar+One&family=Signika&family=Signika+Negative&family=Simonetta&family=Sintony&family=Sirin+Stencil&family=Six+Caps&family=Skranji&family=Slabo+13px&family=Slabo+27px&family=Slackey&family=Smokum&family=Smythe&family=Sniglet&family=Snippet&family=Snowburst+One&family=Sofadi+One&family=Sofia&family=Sonsie+One&family=Sorts+Mill+Goudy&family=Source+Code+Pro&family=Source+Sans+Pro&family=Source+Serif+Pro&family=Space+Mono&family=Special+Elite&family=Spicy+Rice&family=Spinnaker&family=Spirax&family=Squada+One&family=Sree+Krushnadevaraya&family=Stalemate&family=Stalinist+One&family=Stardos+Stencil&family=Stint+Ultra+Condensed&family=Stint+Ultra+Expanded&family=Stoke&family=Strait&family=Sue+Ellen+Francisco&family=Sumana&family=Sunshiney&family=Supermercado+One&family=Sura&family=Suranna&family=Suravaram&family=Suwannaphum&family=Swanky+and+Moo+Moo&family=Syncopate&family=Tangerine&family=Taprom&family=Tauri&family=Taviraj&family=Teko&family=Telex&family=Tenali+Ramakrishna&family=Tenor+Sans&family=Text+Me+One&family=The+Girl+Next+Door&family=Tienne&family=Timmana&family=Tinos&family=Titan+One&family=Titillium+Web&family=Trade+Winds&family=Trirong&family=Trocchi&family=Trochut&family=Trykker&family=Tulpen+One&family=Ubuntu&family=Ubuntu+Condensed&family=Ubuntu+Mono&family=Ultra&family=Uncial+Antiqua&family=Underdog&family=Unica+One&family=UnifrakturCook&family=UnifrakturMaguntia&family=Unkempt&family=Unlock&family=Unna&family=VT323&family=Vampiro+One&family=Varela&family=Varela+Round&family=Vast+Shadow&family=Vesper+Libre&family=Vibur&family=Vidaloka&family=Viga&family=Voces&family=Volkhov&family=Vollkorn&family=Voltaire&family=Waiting+for+the+Sunrise&family=Wallpoet&family=Walter+Turncoat&family=Warnes&family=Wellfleet&family=Wendy+One&family=Wire+One&family=Work+Sans&family=Yanone+Kaffeesatz&family=Yantramanav&family=Yellowtail&family=Yeseva+One&family=Yesteryear&family=Zeyada&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4f46e5;
            --primary-light: #6366f1;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --border-color: #e5e7eb;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            --radius: 0.5rem;
        }

        [data-theme="dark"] {
            --primary-color: #6366f1;
            --primary-light: #818cf8;
            --text-primary: #f3f4f6;
            --text-secondary: #9ca3af;
            --bg-primary: #111827;
            --bg-secondary: #1f2937;
            --border-color: #374151;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s;
            line-height: 1.6;
        }

        #app {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-color: var(--bg-primary);
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
            z-index: 10;
        }

        .logo {
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toolbar {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        button, .button {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        button:hover, .button:hover {
            background-color: var(--bg-secondary);
        }

        button.primary {
            background-color: var(--primary-color);
            color: white;
            border: none;
        }

        button.primary:hover {
            background-color: var(--primary-light);
        }

        .editor-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            padding: 1rem;
        }

        #editor {
            flex: 1;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 1.5rem;
            outline: none;
            box-shadow: var(--shadow);
            overflow-y: auto;
            line-height: 1.8;
            color: var(--text-primary);
            resize: none;
            min-height: 60vh;
            font-family: inherit;
        }

        #editor:focus {
            border-color: var(--primary-color);
        }

        .formatting-toolbar {
            display: flex;
            gap: 0.5rem;
            padding: 0.5rem;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius) var(--radius) 0 0;
            border-bottom: none;
            flex-wrap: wrap;
        }

        .formatting-toolbar button {
            padding: 0.5rem;
            min-width: 36px;
            justify-content: center;
        }

        .font-selector {
            min-width: 150px;
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: inherit;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 1rem;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 0 0 var(--radius) var(--radius);
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background-color: var(--bg-primary);
            padding: 1.5rem;
            border-radius: var(--radius);
            width: 90%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transform: translateY(-20px);
            transition: transform 0.3s;
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .modal-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .close-button {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        input[type="text"], input[type="file"], textarea, select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }

        .search-container {
            display: flex;
            gap: 0.5rem;
            margin-left: auto;
        }

        .search-container input {
            width: 200px;
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }

        .highlight {
            background-color: yellow;
            color: black;
        }

        .fa-spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media print {
            header, .formatting-toolbar, .status-bar {
                display: none !important;
            }
            #editor {
                border: none;
                padding: 0;
                margin: 0;
                box-shadow: none;
                min-height: auto;
            }
            body {
                background-color: white;
                color: black;
            }
        }

        @media (max-width: 768px) {
            .toolbar {
                gap: 0.25rem;
            }
            
            button, .button {
                padding: 0.5rem;
                font-size: 0.8rem;
            }
            
            .font-selector {
                min-width: 120px;
                font-size: 0.8rem;
            }
            
            .search-container input {
                width: 150px;
            }
        }

        @media (max-width: 480px) {
            header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .search-container {
                margin-left: 0;
                width: 100%;
            }
            
            .search-container input {
                width: 100%;
            }
            
            .font-selector {
                min-width: 100px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <header>
            <div class="logo">
                <i class="fas fa-file-alt"></i>
                <span>Mann Documents</span>
            </div>
            <div class="toolbar">
                <button id="new-doc" title="New Document">
                    <i class="fas fa-file"></i>
                    <span class="desktop-only">New</span>
                </button>
                <button id="open-doc" title="Open Document">
                    <i class="fas fa-folder-open"></i>
                    <span class="desktop-only">Open</span>
                </button>
                <button id="save-doc" class="primary" title="Save Document">
                    <i class="fas fa-save"></i>
                    <span class="desktop-only">Save</span>
                </button>
                <button id="print-doc" title="Print Document">
                    <i class="fas fa-print"></i>
                    <span class="desktop-only">Print</span>
                </button>
                <button id="send-discord" title="Send to Discord">
                    <i class="fab fa-discord"></i>
                    <span class="desktop-only">Send</span>
                </button>
                <div class="search-container">
                    <input type="text" id="search-input" placeholder="Search...">
                    <button id="search-btn" title="Search">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <button id="theme-toggle" title="Toggle Theme">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <div class="editor-container">
            <div class="formatting-toolbar">
                <select id="font-family" class="font-selector" title="Font Family">
                    <option value="'Inter', sans-serif">Default (Inter)</option>
                    <option value="'Abril Fatface', cursive">Abril Fatface</option>
                    <option value="'Alegreya', serif">Alegreya</option>
                    <option value="'Alegreya Sans', sans-serif">Alegreya Sans</option>
                    <option value="'Alfa Slab One', cursive">Alfa Slab One</option>
                    <option value="'Alice', serif">Alice</option>
                    <option value="'Alike', serif">Alike</option>
                    <option value="'Allan', cursive">Allan</option>
                    <option value="'Allerta', sans-serif">Allerta</option>
                    <option value="'Allura', cursive">Allura</option>
                    <option value="'Almendra', serif">Almendra</option>
                    <option value="'Amarante', cursive">Amarante</option>
                    <option value="'Amaranth', sans-serif">Amaranth</option>
                    <option value="'Amatic SC', cursive">Amatic SC</option>
                    <option value="'Amiri', serif">Amiri</option>
                    <option value="'Anaheim', sans-serif">Anaheim</option>
                    <option value="'Andada', serif">Andada</option>
                    <option value="'Anton', sans-serif">Anton</option>
                    <option value="'Arapey', serif">Arapey</option>
                    <option value="'Architects Daughter', cursive">Architects Daughter</option>
                    <option value="'Archivo Black', sans-serif">Archivo Black</option>
                    <option value="'Arimo', sans-serif">Arimo</option>
                    <option value="'Arvo', serif">Arvo</option>
                    <option value="'Asap', sans-serif">Asap</option>
                    <option value="'Audiowide', cursive">Audiowide</option>
                    <option value="'Averia Libre', cursive">Averia Libre</option>
                    <option value="'Bangers', cursive">Bangers</option>
                    <option value="'Barlow', sans-serif">Barlow</option>
                    <option value="'Baskerville', serif">Baskerville</option>
                    <option value="'Bebas Neue', cursive">Bebas Neue</option>
                    <option value="'Belgrano', serif">Belgrano</option>
                    <option value="'Bentham', serif">Bentham</option>
                    <option value="'Bitter', serif">Bitter</option>
                    <option value="'Bodoni Moda', serif">Bodoni Moda</option>
                    <option value="'Bree Serif', serif">Bree Serif</option>
                    <option value="'Cabin', sans-serif">Cabin</option>
                    <option value="'Cairo', sans-serif">Cairo</option>
                    <option value="'Cardo', serif">Cardo</option>
                    <option value="'Carme', sans-serif">Carme</option>
                    <option value="'Caveat', cursive">Caveat</option>
                    <option value="'Changa One', cursive">Changa One</option>
                    <option value="'Chivo', sans-serif">Chivo</option>
                    <option value="'Cinzel', serif">Cinzel</option>
                    <option value="'Comfortaa', cursive">Comfortaa</option>
                    <option value="'Comic Neue', cursive">Comic Neue</option>
                    <option value="'Cormorant', serif">Cormorant</option>
                    <option value="'Courier Prime', monospace">Courier Prime</option>
                    <option value="'Crimson Text', serif">Crimson Text</option>
                    <option value="'Dancing Script', cursive">Dancing Script</option>
                    <option value="'Didact Gothic', sans-serif">Didact Gothic</option>
                    <option value="'Domine', serif">Domine</option>
                    <option value="'EB Garamond', serif">EB Garamond</option>
                    <option value="'Economica', sans-serif">Economica</option>
                    <option value="'Exo 2', sans-serif">Exo 2</option>
                    <option value="'Fira Sans', sans-serif">Fira Sans</option>
                    <option value="'Fjalla One', sans-serif">Fjalla One</option>
                    <option value="'Fugaz One', cursive">Fugaz One</option>
                    <option value="'Garamond', serif">Garamond</option>
                    <option value="'Georgia', serif">Georgia</option>
                    <option value="'Gilda Display', serif">Gilda Display</option>
                    <option value="'Glory', sans-serif">Glory</option>
                    <option value="'Goudy Bookletter 1911', serif">Goudy Bookletter</option>
                    <option value="'Great Vibes', cursive">Great Vibes</option>
                    <option value="'Hammersmith One', sans-serif">Hammersmith One</option>
                    <option value="'Heebo', sans-serif">Heebo</option>
                    <option value="'Helvetica', sans-serif">Helvetica</option>
                    <option value="'IBM Plex Sans', sans-serif">IBM Plex Sans</option>
                    <option value="'Impact', sans-serif">Impact</option>
                    <option value="'Inconsolata', monospace">Inconsolata</option>
                    <option value="'Josefin Sans', sans-serif">Josefin Sans</option>
                    <option value="'Josefin Slab', serif">Josefin Slab</option>
                    <option value="'Jost', sans-serif">Jost</option>
                    <option value="'Jura', sans-serif">Jura</option>
                    <option value="'Karla', sans-serif">Karla</option>
                    <option value="'Kaushan Script', cursive">Kaushan Script</option>
                    <option value="'Kreon', serif">Kreon</option>
                    <option value="'Lato', sans-serif">Lato</option>
                    <option value="'Libre Baskerville', serif">Libre Baskerville</option>
                    <option value="'Libre Franklin', sans-serif">Libre Franklin</option>
                    <option value="'Lobster', cursive">Lobster</option>
                    <option value="'Lora', serif">Lora</option>
                    <option value="'Manrope', sans-serif">Manrope</option>
                    <option value="'Marcellus', serif">Marcellus</option>
                    <option value="'Merriweather', serif">Merriweather</option>
                    <option value="'Montserrat', sans-serif">Montserrat</option>
                    <option value="'Mukta', sans-serif">Mukta</option>
                    <option value="'Nanum Gothic', sans-serif">Nanum Gothic</option>
                    <option value="'Noto Sans', sans-serif">Noto Sans</option>
                    <option value="'Noto Serif', serif">Noto Serif</option>
                    <option value="'Nunito', sans-serif">Nunito</option>
                    <option value="'Open Sans', sans-serif">Open Sans</option>
                    <option value="'Oswald', sans-serif">Oswald</option>
                    <option value="'Overpass', sans-serif">Overpass</option>
                    <option value="'Pacifico', cursive">Pacifico</option>
                    <option value="'Palatino', serif">Palatino</option>
                    <option value="'Poppins', sans-serif">Poppins</option>
                    <option value="'PT Sans', sans-serif">PT Sans</option>
                    <option value="'PT Serif', serif">PT Serif</option>
                    <option value="'Playfair Display', serif">Playfair Display</option>
                    <option value="'Quicksand', sans-serif">Quicksand</option>
                    <option value="'Raleway', sans-serif">Raleway</option>
                    <option value="'Roboto', sans-serif">Roboto</option>
                    <option value="'Roboto Condensed', sans-serif">Roboto Condensed</option>
                    <option value="'Roboto Mono', monospace">Roboto Mono</option>
                    <option value="'Roboto Slab', serif">Roboto Slab</option>
                    <option value="'Rubik', sans-serif">Rubik</option>
                    <option value="'Rufina', serif">Rufina</option>
                    <option value="'Russo One', sans-serif">Russo One</option>
                    <option value="'Sacramento', cursive">Sacramento</option>
                    <option value="'Saira', sans-serif">Saira</option>
                    <option value="'Satisfy', cursive">Satisfy</option>
                    <option value="'Shadows Into Light', cursive">Shadows Into Light</option>
                    <option value="'Source Code Pro', monospace">Source Code Pro</option>
                    <option value="'Source Sans Pro', sans-serif">Source Sans Pro</option>
                    <option value="'Source Serif Pro', serif">Source Serif Pro</option>
                    <option value="'Space Mono', monospace">Space Mono</option>
                    <option value="'Spectral', serif">Spectral</option>
                    <option value="'Tangerine', cursive">Tangerine</option>
                    <option value="'Times New Roman', serif">Times New Roman</option>
                    <option value="'Titillium Web', sans-serif">Titillium Web</option>
                    <option value="'Ubuntu', sans-serif">Ubuntu</option>
                    <option value="'Ubuntu Mono', monospace">Ubuntu Mono</option>
                    <option value="'Varela Round', sans-serif">Varela Round</option>
                    <option value="'Verdana', sans-serif">Verdana</option>
                    <option value="'Volkhov', serif">Volkhov</option>
                    <option value="'Work Sans', sans-serif">Work Sans</option>
                    <option value="'Yanone Kaffeesatz', sans-serif">Yanone Kaffeesatz</option>
                    <option value="'Zilla Slab', serif">Zilla Slab</option>
                </select>
                <button id="bold" title="Bold"><i class="fas fa-bold"></i></button>
                <button id="italic" title="Italic"><i class="fas fa-italic"></i></button>
                <button id="underline" title="Underline"><i class="fas fa-underline"></i></button>
                <button id="strikethrough" title="Strikethrough"><i class="fas fa-strikethrough"></i></button>
                <div class="separator"></div>
                <button id="heading1" title="Heading 1"><i class="fas fa-heading"></i>1</button>
                <button id="heading2" title="Heading 2"><i class="fas fa-heading"></i>2</button>
                <button id="paragraph" title="Paragraph"><i class="fas fa-paragraph"></i></button>
                <div class="separator"></div>
                <button id="ul" title="Bullet List"><i class="fas fa-list-ul"></i></button>
                <button id="ol" title="Numbered List"><i class="fas fa-list-ol"></i></button>
                <div class="separator"></div>
                <button id="undo" title="Undo"><i class="fas fa-undo"></i></button>
                <button id="redo" title="Redo"><i class="fas fa-redo"></i></button>
                <div class="separator"></div>
                <button id="link" title="Insert Link"><i class="fas fa-link"></i></button>
                <button id="image" title="Insert Image"><i class="fas fa-image"></i></button>
            </div>
            
            <div id="editor" contenteditable="true" spellcheck="true"></div>
            
            <div class="status-bar">
                <div id="word-count">0 words</div>
                <div id="char-count">0 characters</div>
                <div id="last-saved">Not saved yet</div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="save-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Save Document</h3>
                <button class="close-button">&times;</button>
            </div>
            <div class="form-group">
                <label for="filename">File Name</label>
                <input type="text" id="filename" placeholder="Enter file name">
            </div>
            <div class="modal-footer">
                <button id="cancel-save" class="button">Cancel</button>
                <button id="confirm-save" class="primary">Save</button>
            </div>
        </div>
    </div>

    <div id="link-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Insert Link</h3>
                <button class="close-button">&times;</button>
            </div>
            <div class="form-group">
                <label for="link-url">URL</label>
                <input type="text" id="link-url" placeholder="https://example.com">
            </div>
            <div class="form-group">
                <label for="link-text">Text (optional)</label>
                <input type="text" id="link-text" placeholder="Link text">
            </div>
            <div class="modal-footer">
                <button id="cancel-link" class="button">Cancel</button>
                <button id="confirm-link" class="primary">Insert</button>
            </div>
        </div>
    </div>

    <div id="discord-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Send to Discord</h3>
                <button class="close-button">&times;</button>
            </div>
            <div class="form-group">
                <label for="webhook-url">Webhook URL</label>
                <input type="text" id="webhook-url" placeholder="https://discord.com/api/webhooks/1404016315399929887/awW5i94v4-rmBierRcKn23k1SU2oxWWx5rF2HLp4Q5o_RDIr9eZayjGtEr52crQBmZ4U">
                <small>Save this in localStorage for future use? <input type="checkbox" id="save-webhook"></small>
            </div>
            <div class="form-group">
                <label for="discord-filename">File Name</label>
                <input type="text" id="discord-filename" placeholder="document">
            </div>
            <div class="form-group">
                <label for="file-format">File Format</label>
                <select id="file-format">
                    <option value="txt">Text (.txt)</option>
                    <option value="pdf">PDF (.pdf)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="discord-message">Message (optional)</label>
                <textarea id="discord-message" placeholder="Optional message to include with the file"></textarea>
            </div>
            <div class="modal-footer">
                <button id="cancel-discord" class="button">Cancel</button>
                <button id="confirm-discord" class="primary">Send</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const editor = document.getElementById('editor');
            const wordCountEl = document.getElementById('word-count');
            const charCountEl = document.getElementById('char-count');
            const lastSavedEl = document.getElementById('last-saved');
            const themeToggle = document.getElementById('theme-toggle');
            const saveModal = document.getElementById('save-modal');
            const linkModal = document.getElementById('link-modal');
            const discordModal = document.getElementById('discord-modal');
            const searchInput = document.getElementById('search-input');
            const searchBtn = document.getElementById('search-btn');
            const printBtn = document.getElementById('print-doc');
            const fontSelector = document.getElementById('font-family');
            
            // Formatting buttons
            const boldBtn = document.getElementById('bold');
            const italicBtn = document.getElementById('italic');
            const underlineBtn = document.getElementById('underline');
            const strikethroughBtn = document.getElementById('strikethrough');
            const heading1Btn = document.getElementById('heading1');
            const heading2Btn = document.getElementById('heading2');
            const paragraphBtn = document.getElementById('paragraph');
            const ulBtn = document.getElementById('ul');
            const olBtn = document.getElementById('ol');
            const undoBtn = document.getElementById('undo');
            const redoBtn = document.getElementById('redo');
            const linkBtn = document.getElementById('link');
            const imageBtn = document.getElementById('image');
            
            // File operations buttons
            const newDocBtn = document.getElementById('new-doc');
            const openDocBtn = document.getElementById('open-doc');
            const saveDocBtn = document.getElementById('save-doc');
            const sendDiscordBtn = document.getElementById('send-discord');
            
            // Modal buttons
            const cancelSaveBtn = document.getElementById('cancel-save');
            const confirmSaveBtn = document.getElementById('confirm-save');
            const cancelLinkBtn = document.getElementById('cancel-link');
            const confirmLinkBtn = document.getElementById('confirm-link');
            const cancelDiscordBtn = document.getElementById('cancel-discord');
            const confirmDiscordBtn = document.getElementById('confirm-discord');
            
            // State
            let currentFile = null;
            let searchActive = false;
            let searchResults = [];
            let currentSearchIndex = -1;
            
            // Configuration - Replace this with your actual Discord webhook URL
            const DEFAULT_WEBHOOK_URL = "https://discord.com/api/webhooks/YOUR_WEBHOOK_ID/YOUR_WEBHOOK_TOKEN";
            let discordWebhookUrl = localStorage.getItem('discordWebhookUrl') || DEFAULT_WEBHOOK_URL;
            
            // Initialize
            loadFromLocalStorage();
            updateCounts();
            updateLastSaved();
            checkThemePreference();
            initializeFonts();
            
            // Event Listeners
            editor.addEventListener('input', function() {
                updateCounts();
                saveToLocalStorage();
            });
            
            editor.addEventListener('keydown', function(e) {
                // Tab key support
                if (e.key === 'Tab') {
                    e.preventDefault();
                    document.execCommand('insertText', false, '\t');
                }
                
                // Ctrl+S to save
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    showSaveModal();
                }
                
                // Ctrl+F to search
                if (e.ctrlKey && e.key === 'f') {
                    e.preventDefault();
                    searchInput.focus();
                }

                // Ctrl+P to print
                if (e.ctrlKey && e.key === 'p') {
                    e.preventDefault();
                    printDocument();
                }
            });
            
            // Formatting buttons
            boldBtn.addEventListener('click', () => execCommand('bold'));
            italicBtn.addEventListener('click', () => execCommand('italic'));
            underlineBtn.addEventListener('click', () => execCommand('underline'));
            strikethroughBtn.addEventListener('click', () => execCommand('strikeThrough'));
            heading1Btn.addEventListener('click', () => formatBlock('<h1>'));
            heading2Btn.addEventListener('click', () => formatBlock('<h2>'));
            paragraphBtn.addEventListener('click', () => formatBlock('<p>'));
            ulBtn.addEventListener('click', () => execCommand('insertUnorderedList'));
            olBtn.addEventListener('click', () => execCommand('insertOrderedList'));
            undoBtn.addEventListener('click', () => execCommand('undo'));
            redoBtn.addEventListener('click', () => execCommand('redo'));
            linkBtn.addEventListener('click', showLinkModal);
            imageBtn.addEventListener('click', () => alert('Image upload would be implemented here'));
            fontSelector.addEventListener('change', function() {
                const fontFamily = this.value;
                document.execCommand('fontName', false, fontFamily.split(',')[0].replace(/['"]/g, ''));
                editor.style.fontFamily = fontFamily;
                editor.focus();
            });
            
            // File operations
            newDocBtn.addEventListener('click', newDocument);
            openDocBtn.addEventListener('click', openFile);
            saveDocBtn.addEventListener('click', showSaveModal);
            printBtn.addEventListener('click', printDocument);
            sendDiscordBtn.addEventListener('click', showDiscordModal);
            
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            
            // Modal buttons
            cancelSaveBtn.addEventListener('click', () => saveModal.classList.remove('active'));
            confirmSaveBtn.addEventListener('click', saveFile);
            cancelLinkBtn.addEventListener('click', () => linkModal.classList.remove('active'));
            confirmLinkBtn.addEventListener('click', insertLink);
            cancelDiscordBtn.addEventListener('click', () => discordModal.classList.remove('active'));
            confirmDiscordBtn.addEventListener('click', sendToDiscord);
            
            // Search functionality
            searchBtn.addEventListener('click', performSearch);
            searchInput.addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target === saveModal) {
                    saveModal.classList.remove('active');
                }
                if (e.target === linkModal) {
                    linkModal.classList.remove('active');
                }
                if (e.target === discordModal) {
                    discordModal.classList.remove('active');
                }
            });
            
            // Functions
            function execCommand(command, value = null) {
                document.execCommand(command, false, value);
                editor.focus();
            }
            
            function formatBlock(tag) {
                document.execCommand('formatBlock', false, tag);
                editor.focus();
            }
            
            function updateCounts() {
                const text = editor.innerText.trim();
                const wordCount = text ? text.split(/\s+/).length : 0;
                const charCount = text.length;
                
                wordCountEl.textContent = `${wordCount} words`;
                charCountEl.textContent = `${charCount} characters`;
            }
            
            function updateLastSaved() {
                const lastSaved = localStorage.getItem('lastSaved');
                if (lastSaved) {
                    lastSavedEl.textContent = `Last saved: ${new Date(lastSaved).toLocaleString()}`;
                }
            }
            
            function saveToLocalStorage() {
                localStorage.setItem('editorContent', editor.innerHTML);
                localStorage.setItem('lastSaved', new Date().toISOString());
                updateLastSaved();
            }
            
            function loadFromLocalStorage() {
                const savedContent = localStorage.getItem('editorContent');
                if (savedContent) {
                    editor.innerHTML = savedContent;
                }
            }
            
            function newDocument() {
                if (editor.innerHTML.trim() && !confirm('Are you sure you want to create a new document? Unsaved changes will be lost.')) {
                    return;
                }
                editor.innerHTML = '';
                currentFile = null;
                localStorage.removeItem('editorContent');
                updateCounts();
                editor.focus();
            }
            
            function showSaveModal() {
                document.getElementById('filename').value = currentFile || 'document.txt';
                saveModal.classList.add('active');
                document.getElementById('filename').focus();
            }
            
            function saveFile() {
                const filename = document.getElementById('filename').value;
                if (!filename) {
                    alert('Please enter a file name');
                    return;
                }
                
                const content = editor.innerHTML;
                const blob = new Blob([content], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                currentFile = filename;
                saveModal.classList.remove('active');
            }
            
            function openFile() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.txt,.html,.md,.rtf';
                
                input.onchange = e => {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        editor.innerHTML = e.target.result;
                        currentFile = file.name;
                        updateCounts();
                    };
                    reader.readAsText(file);
                };
                
                input.click();
            }
            
            function printDocument() {
                window.print();
            }
            
            function toggleTheme() {
                const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
                if (isDark) {
                    document.documentElement.removeAttribute('data-theme');
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                    localStorage.setItem('theme', 'light');
                } else {
                    document.documentElement.setAttribute('data-theme', 'dark');
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                    localStorage.setItem('theme', 'dark');
                }
            }
            
            function checkThemePreference() {
                const savedTheme = localStorage.getItem('theme') || 
                                    (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
                
                if (savedTheme === 'dark') {
                    document.documentElement.setAttribute('data-theme', 'dark');
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                }
            }
            
            function showLinkModal() {
                linkModal.classList.add('active');
                document.getElementById('link-url').focus();
            }
            
            function insertLink() {
                const url = document.getElementById('link-url').value;
                const text = document.getElementById('link-text').value;
                
                if (!url) {
                    alert('Please enter a URL');
                    return;
                }
                
                if (text) {
                    execCommand('insertHTML', `<a href="${url}" target="_blank">${text}</a>`);
                } else {
                    execCommand('createLink', url);
                }
                
                document.getElementById('link-url').value = '';
                document.getElementById('link-text').value = '';
                linkModal.classList.remove('active');
            }
            
            function showDiscordModal() {
                document.getElementById('webhook-url').value = discordWebhookUrl;
                document.getElementById('discord-filename').value = currentFile ? currentFile.replace(/\.[^/.]+$/, "") : 'document';
                discordModal.classList.add('active');
                document.getElementById('webhook-url').focus();
            }
            
            async function sendToDiscord() {
                let webhookUrl = document.getElementById('webhook-url').value.trim();
                // Fall back to default if input is empty
                if (!webhookUrl) {
                    webhookUrl = DEFAULT_WEBHOOK_URL;
                }
                
                let filename = document.getElementById('discord-filename').value.trim();
                const fileFormat = document.getElementById('file-format').value;
                const message = document.getElementById('discord-message').value.trim();
                const saveWebhook = document.getElementById('save-webhook').checked;
                
                if (!webhookUrl) {
                    alert('Please enter a webhook URL or configure a default one');
                    return;
                }
                
                if (!filename) {
                    filename = 'document';
                }
                
                // Add file extension if not already present
                if (!filename.endsWith('.' + fileFormat)) {
                    filename += '.' + fileFormat;
                }
                
                try {
                    let blob, contentType;
                    
                    if (fileFormat === 'pdf') {
                        // For PDF generation we'll use html2pdf.js
                        const opt = {
                            margin: 10,
                            filename: filename,
                            image: { type: 'jpeg', quality: 0.98 },
                            html2canvas: { 
                                scale: 2,
                                letterRendering: true,
                                useCORS: true,
                                allowTaint: true
                            },
                            jsPDF: { 
                                unit: 'mm', 
                                format: 'a4', 
                                orientation: 'portrait',
                                putOnlyUsedFonts: true
                            }
                        };
                        
                        // Show loading state
                        confirmDiscordBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating PDF...';
                        confirmDiscordBtn.disabled = true;
                        
                        // Load html2pdf.js dynamically
                        await loadScript('https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js');
                        
                        // Create a clone of the editor content with forced font styles
                        const element = document.createElement('div');
                        const contentClone = editor.cloneNode(true);
                        
                        // Apply the selected font family to all elements
                        const walker = document.createTreeWalker(
                            contentClone,
                            NodeFilter.SHOW_ELEMENT,
                            null,
                            false
                        );
                        
                        let node;
                        while (node = walker.nextNode()) {
                            node.style.fontFamily = fontSelector.value.split(',')[0].replace(/['"]/g, '');
                        }
                        
                        element.appendChild(contentClone);
                        
                        // Generate PDF
                        const pdfBlob = await html2pdf()
                            .set(opt)
                            .from(element)
                            .toPdf()
                            .output('blob');
                        
                        blob = pdfBlob;
                        contentType = 'application/pdf';
                    } else {
                        // Plain text file
                        const content = editor.innerText; // Use innerText for plain text
                        blob = new Blob([content], { type: 'text/plain' });
                        contentType = 'text/plain';
                    }
                    
                    // Create FormData for the request
                    const formData = new FormData();
                    formData.append('file', blob, filename);
                    
                    if (message) {
                        formData.append('content', message);
                    }
                    
                    // Update loading state
                    confirmDiscordBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
                    
                    // Send to Discord
                    const response = await fetch(webhookUrl, {
                        method: 'POST',
                        body: formData
                    });
                    
                    if (response.ok) {
                        alert('File sent successfully to Discord!');
                        
                        // Save webhook URL if requested
                        if (saveWebhook) {
                            discordWebhookUrl = webhookUrl;
                            localStorage.setItem('discordWebhookUrl', webhookUrl);
                        }
                        
                        discordModal.classList.remove('active');
                    } else {
                        const error = await response.text();
                        throw new Error(`Discord error: ${error}`);
                    }
                } catch (error) {
                    console.error('Error sending to Discord:', error);
                    alert(`Failed to send to Discord: ${error.message}`);
                } finally {
                    confirmDiscordBtn.innerHTML = 'Send';
                    confirmDiscordBtn.disabled = false;
                }
            }
            
            // Helper function to load scripts dynamically
            function loadScript(src) {
                return new Promise((resolve, reject) => {
                    if (document.querySelector(`script[src="${src}"]`)) {
                        resolve();
                        return;
                    }
                    
                    const script = document.createElement('script');
                    script.src = src;
                    script.onload = resolve;
                    script.onerror = reject;
                    document.head.appendChild(script);
                });
            }
            
            // Initialize fonts
            function initializeFonts() {
                // Fonts are already loaded via Google Fonts in the head
                // Just ensure the editor starts with the default font
                editor.style.fontFamily = "'Inter', sans-serif";
            }
            
            function performSearch() {
                const searchTerm = searchInput.value.trim();
                
                if (!searchTerm) {
                    clearSearch();
                    return;
                }
                
                // Clear previous highlights
                clearSearch();
                
                // Get all text nodes
                const textNodes = [];
                const walker = document.createTreeWalker(
                    editor,
                    NodeFilter.SHOW_TEXT,
                    null,
                    false
                );
                
                let node;
                while (node = walker.nextNode()) {
                    textNodes.push(node);
                }
                
                // Search and highlight
                const regex = new RegExp(searchTerm, 'gi');
                searchResults = [];
                
                textNodes.forEach(textNode => {
                    const matches = [...textNode.nodeValue.matchAll(regex)];
                    if (matches.length > 0) {
                        const parent = textNode.parentNode;
                        const text = textNode.nodeValue;
                        let lastIndex = 0;
                        const fragment = document.createDocumentFragment();
                        
                        matches.forEach(match => {
                            // Text before match
                            if (match.index > lastIndex) {
                                fragment.appendChild(
                                    document.createTextNode(text.substring(lastIndex, match.index))
                                );
                            }
                            
                            // Highlighted match
                            const span = document.createElement('span');
                            span.className = 'highlight';
                            span.textContent = match[0];
                            fragment.appendChild(span);
                            
                            // Store reference for navigation
                            searchResults.push(span);
                            
                            lastIndex = match.index + match[0].length;
                        });
                        
                        // Remaining text after last match
                        if (lastIndex < text.length) {
                            fragment.appendChild(
                                document.createTextNode(text.substring(lastIndex))
                            );
                        }
                        
                        parent.replaceChild(fragment, textNode);
                    }
                });
                
                if (searchResults.length > 0) {
                    searchActive = true;
                    currentSearchIndex = 0;
                    scrollToHighlight(currentSearchIndex);
                } else {
                    alert('No matches found');
                }
            }
            
            function clearSearch() {
                if (!searchActive) return;
                
                const highlights = editor.querySelectorAll('.highlight');
                highlights.forEach(highlight => {
                    const parent = highlight.parentNode;
                    parent.replaceChild(document.createTextNode(highlight.textContent), highlight);
                });
                
                searchResults = [];
                currentSearchIndex = -1;
                searchActive = false;
            }
            
            function scrollToHighlight(index) {
                if (index >= 0 && index < searchResults.length) {
                    searchResults[index].scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                    
                    // Remove previous active highlight
                    searchResults.forEach(result => {
                        result.style.backgroundColor = 'yellow';
                        result.style.color = 'black';
                    });
                    
                    // Highlight current match
                    searchResults[index].style.backgroundColor = 'orange';
                    searchResults[index].style.color = 'white';
                }
            }
            
            // Initialize with focus on editor
            editor.focus();
        });
    </script>
</body>
</html>
